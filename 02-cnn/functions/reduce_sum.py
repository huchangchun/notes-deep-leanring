# -*- coding: utf-8 -*-
"""
Created on Sun Aug 26 12:12:37 2018

@author: hcc
"""

"""
tf.sign(x,name=None)  返回符号 y = sign = -1 if x<0; 0 if x==0; 1 if x>0

tf.reduce_sum(input,reduction_indices)
input = [[1,1,1],[1,1,1]] 
reduction_indices = 1 ,output=[3,3]
reduction_indices = 0 ,output=[2,2,2]
"""
import numpy as np
import tensorflow as tf
inputs = [[1,0,2],[3,2,4]]
inputs = np.array(inputs)
a =[[22, 151, 6, 146, 180, 190, 192, 3, 22, 17, 47, 527, 5],
 [128, 141, 508, 3, 150, 329, 276, 345, 47, 20, 87, 14, 5],
 [33, 3, 18, 123, 266, 3, 128, 158, 3, 6, 57, 40, 5],
 [292, 291, 60, 165, 195, 11, 7, 62, 282, 16, 91, 15, 5],
 [2, 7, 36, 302, 335, 41, 3, 2, 55, 92, 274, 41, 5],
 [6, 150, 281, 7, 125, 499, 66, 220, 186, 11, 11, 15, 5],
 [254, 173, 60, 385, 344, 144, 163, 381, 220, 10, 597, 11, 5],
 [160, 355, 665, 881, 3, 20, 253, 126, 8, 29, 338, 70, 5],
 [56, 74, 75, 196, 105, 42, 237, 253, 522, 107, 76, 96, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [24, 366, 258, 3, 6, 516, 519, 66, 36, 430, 514, 207, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [455, 88, 15, 4, 237, 253, 108, 45, 68, 12, 11, 271, 5],
 [161, 212, 15, 4, 237, 253, 108, 45, 68, 12, 11, 271, 5],
 [55, 74, 15, 4, 237, 253, 108, 45, 68, 12, 11, 271, 5],
 [144, 163, 15, 4, 237, 253, 108, 45, 68, 12, 11, 271, 5],
 [160, 355, 665, 881, 3, 20, 253, 126, 8, 29, 338, 70, 5],
 [254, 173, 144, 163, 381, 220, 11, 14, 220, 186, 11, 15, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [588, 67, 347, 40, 36, 302, 696, 224, 402, 90, 348, 428, 5],
 [30, 12, 76, 96, 4, 39, 37, 6, 512, 567, 36, 302, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [254, 173, 144, 163, 381, 220, 11, 14, 220, 186, 11, 15, 5],
 [147, 129, 7, 137, 129, 57, 498, 10, 311, 928, 2, 55, 5],
 [254, 173, 144, 163, 381, 220, 11, 14, 220, 186, 11, 15, 5],
 [478, 448, 102, 505, 15, 335, 383, 142, 438, 453, 327, 143, 5],
 [468, 473, 6, 201, 140, 3, 19, 47, 32, 6, 145, 113, 5],
 [1132, 562, 2, 88, 3, 2, 600, 2, 562, 86, 22, 225, 5],
 [159, 56, 74, 4, 31, 4, 627, 54, 265, 9, 13, 8, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [56, 74, 75, 196, 105, 42, 237, 253, 522, 107, 76, 96, 5],
 [22, 151, 6, 146, 180, 190, 192, 3, 22, 17, 47, 527, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [882, 156, 41, 114, 4, 62, 786, 721, 301, 700, 16, 91, 5],
 [147, 67, 759, 170, 121, 4, 20, 253, 146, 180, 126, 8, 5],
 [56, 191, 61, 3, 210, 168, 61, 3, 570, 139, 13, 8, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [22, 151, 6, 146, 180, 190, 192, 3, 22, 17, 47, 527, 5],
 [159, 56, 74, 4, 31, 4, 627, 54, 265, 273, 13, 8, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [199, 32, 23, 17, 94, 98, 3, 23, 99, 17, 13, 8, 5],
 [128, 141, 508, 3, 150, 329, 276, 345, 47, 20, 87, 14, 5],
 [33, 3, 18, 123, 266, 3, 128, 158, 3, 6, 57, 40, 5],
 [159, 56, 74, 4, 31, 4, 627, 54, 265, 273, 13, 8, 5],
 [55, 74, 15, 4, 3, 6, 40, 74, 14, 598, 710, 15, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [56, 74, 75, 196, 105, 42, 237, 253, 522, 107, 76, 96, 5],
 [468, 473, 6, 201, 140, 3, 19, 47, 32, 6, 145, 113, 5],
 [22, 151, 6, 146, 180, 190, 192, 3, 22, 17, 47, 527, 5],
 [152, 137, 129, 58, 333, 127, 30, 91, 425, 68, 48, 12, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [94, 4, 529, 67, 40, 54, 208, 211, 67, 154, 4, 6, 5],
 [92, 18, 691, 7, 147, 459, 91, 103, 43, 428, 43, 151, 5],
 [160, 355, 665, 881, 3, 20, 253, 126, 8, 29, 338, 70, 5],
 [6, 573, 565, 15, 3, 6, 512, 567, 438, 453, 74, 271, 5]]
 
ar = np.asarray(a)
print(ar.shape[0])
print(ar.shape[1])
used = tf.sign(tf.abs(ar))
lenght = tf.reduce_sum(used,reduction_indices=1)
lengths = tf.cast(lenght,tf.int32)
 
with tf.Session() as sess:
 
    print("=====used====")
    print(sess.run(used))
    print("====lenght=====")
    print(sess.run(lenght))
    print("====lengths=====")
    print(sess.run(lengths))
""" 
=====used====
[[1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]
 [1 1 1 1 1 1 1 1 1 1 1 1 1]]   
  ====lenght=====
[13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13
 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13
 13 13 13 13 13 13 13 13 13 13 13 13]
====lengths=====
[13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13
 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13 13
 13 13 13 13 13 13 13 13 13 13 13 13]
""" 
